<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AI Resume Screener • Instant Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <style>
        :root {
            --primary: #00d4ff;
            --primary-dark: #00a0cc;
            --dark: #0f172a;
            --darker: #0a0f1d;
            --light: #e2e8f0;
            --gray: #64748b;
            --success: #10b981;
            --card-bg: rgba(15, 23, 42, 0.78);
        }

        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #0a0f1d 100%);
            color: var(--light);
            min-height: 100vh;
            background-attachment: fixed;
        }

        .background-shapes { position:fixed; inset:0; z-index:0; pointer-events:none; overflow:hidden; }
        .shape {
            position:absolute; border-radius:50%; background:rgba(0,212,255,0.07);
            backdrop-filter:blur(20px); animation:float 28s infinite ease-in-out;
        }
        .shape:nth-child(1) { width:420px; height:420px; top:8%; left:12%; }
        .shape:nth-child(2) { width:320px; height:320px; bottom:18%; right:18%; animation-delay:9s; }
        .shape:nth-child(3) { width:480px; height:480px; top:45%; right:-20%; animation-delay:16s; }
        @keyframes float {
            0%,100% { transform:translate(0,0) rotate(0deg); }
            25% { transform:translate(90px,-70px) rotate(12deg); }
            50% { transform:translate(-50px,110px) rotate(-8deg); }
            75% { transform:translate(70px,50px) rotate(4deg); }
        }

        .container { position:relative; max-width:820px; margin:50px auto; padding:20px; z-index:1; }

        .card {
            background:var(--card-bg); backdrop-filter:blur(16px);
            border-radius:24px; border:1px solid rgba(0,212,255,0.16);
            box-shadow:0 25px 50px -12px rgba(0,0,0,0.65), inset 0 0 0 1px rgba(0,212,255,0.1);
            padding:44px 40px; transition:all 0.5s ease;
        }
        .card:hover { transform:translateY(-10px); }

        h1 {
            font-size:clamp(2.1rem,5.5vw,2.8rem); font-weight:800;
            background:linear-gradient(90deg,#a5f3fc,#67e8f9,#22d3ee);
            -webkit-background-clip:text; background-clip:text; color:transparent;
            text-align:center; margin-bottom:8px;
        }
        .subtitle { color:var(--primary); font-size:1.1rem; text-align:center; opacity:0.92; margin-bottom:40px; }

        .upload-area {
            border:2px dashed rgba(0,212,255,0.4); border-radius:16px;
            padding:50px 30px; text-align:center; transition:all 0.35s ease;
            cursor:pointer; margin:32px 0; min-height:220px;
            display:flex; flex-direction:column; justify-content:center; align-items:center;
        }
        .upload-area:hover, .upload-area.active, .upload-area.dragover {
            border-color:var(--primary); background:rgba(0,212,255,0.06);
            box-shadow:0 0 30px rgba(0,212,255,0.18);
        }
        .upload-area i { font-size:5rem; color:var(--primary); margin-bottom:20px; transition:all 0.5s; }
        .upload-area:hover i, .upload-area.active i, .upload-area.dragover i {
            transform:translateY(-12px) scale(1.1);
        }
        .upload-text { font-size:1.35rem; font-weight:500; color:#e2e8f0; margin-bottom:10px; max-width:90%; line-height:1.4; }
        .upload-hint { color:var(--gray); font-size:0.97rem; }

        input[type="file"] { display:none; }

        .btn {
            background:linear-gradient(90deg,#10b981,#34d399); color:white; border:none;
            padding:16px 56px; font-size:1.18rem; font-weight:600; border-radius:50px;
            cursor:pointer; margin:32px auto 0; display:block; transition:all 0.4s;
            box-shadow:0 10px 30px rgba(16,185,129,0.4); position:relative; overflow:hidden;
        }
        .btn:hover { transform:translateY(-5px); box-shadow:0 20px 45px rgba(16,185,129,0.55); }
        .btn:disabled { background:#4b5563; cursor:not-allowed; box-shadow:none; transform:none; }

        .btn::before {
            content:''; position:absolute; top:0; left:-120%; width:120%; height:100%;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,0.35),transparent);
            transition:left 0.7s;
        }
        .btn:hover::before { left:120%; }

        /* Loading */
        .loading-overlay {
            position:absolute; inset:0; background:rgba(10,15,29,0.85);
            display:none; flex-direction:column; align-items:center; justify-content:center;
            z-index:10; border-radius:24px; backdrop-filter:blur(4px);
        }
        .spinner {
            width:80px; height:80px; border:6px solid rgba(0,212,255,0.2);
            border-top:6px solid var(--primary); border-radius:50%;
            animation:spin 1.1s linear infinite;
        }
        .loading-text { margin-top:24px; color:var(--primary); font-size:1.2rem; font-weight:500; }
        @keyframes spin { to { transform:rotate(360deg); } }

        .result-section { margin-top:48px; padding-top:36px; border-top:1px solid rgba(0,212,255,0.14);
            opacity:0; transform:translateY(25px); transition:all 0.8s ease-out; }
        .result-section.visible { opacity:1; transform:translateY(0); }

        .category-badge {
            display:inline-block; background:linear-gradient(135deg,#06b6d4,#22d3ee);
            padding:10px 36px; border-radius:50px; font-size:1.45rem; font-weight:700;
            color:white; box-shadow:0 8px 25px rgba(6,182,212,0.45);
        }

        .info-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:20px; margin:32px 0; }
        .info-item { background:rgba(15,23,42,0.5); padding:18px 22px; border-radius:12px; border:1px solid rgba(0,212,255,0.12); }
        .info-label { color:var(--primary); font-weight:600; margin-bottom:8px; display:block; font-size:0.95rem; }
        .info-value { font-size:1.05rem; word-break:break-all; }

        h4 { color:var(--primary); font-size:1.35rem; margin:36px 0 18px; }

        .skills-list { display:flex; flex-wrap:wrap; gap:12px; margin-top:12px; }
        .skill-tag {
            background:rgba(0,212,255,0.14); color:#a5f3fc; padding:8px 18px;
            border-radius:999px; font-size:0.96rem; border:1px solid rgba(0,212,255,0.22);
            transition:all 0.3s;
        }
        .skill-tag:hover { background:rgba(0,212,255,0.28); transform:translateY(-3px); }

        @media (max-width:640px) {
            .card { padding:32px 24px; }
            .upload-area { padding:40px 20px; min-height:180px; }
            .upload-area i { font-size:4rem; }
            .upload-text { font-size:1.15rem; }
        }
    </style>
</head>
<body>

<div class="background-shapes">
    <div class="shape"></div><div class="shape"></div><div class="shape"></div>
</div>

<div class="container">
    <div class="card">
        <h1>AI Resume Screener</h1>
        <div class="subtitle">Instant Category & Skill Detection</div>

        <form action="/pred" method="post" enctype="multipart/form-data" id="uploadForm">
            <!-- The label is now only visual — click handling moved to JS -->
            <div class="upload-area" id="dropZone">
                <i class="fas fa-cloud-upload-alt"></i>
                <div class="upload-text" id="uploadMessage">Drop your resume here or click to browse</div>
                <div class="upload-hint">PDF or TXT • Max 5MB</div>
            </div>

            <input type="file" name="resume" id="resume" accept=".pdf,.txt" required>

            <div class="loading-overlay" id="loadingOverlay">
                <div class="spinner"></div>
                <div class="loading-text">Analyzing your resume...</div>
            </div>

            <button type="submit" class="btn" id="submitBtn">
                <i class="fas fa-rocket" style="margin-right:12px;"></i>
                Analyze Resume
            </button>
        </form>

        {% if message %}
            <p style="text-align:center; color:#f87171; margin:24px 0; font-size:1.05rem;">{{ message }}</p>
        {% endif %}

        {% if predicted_category %}
        <div class="result-section visible">
            <div style="text-align:center; margin-bottom:24px;">
                <div class="category-badge">{{ predicted_category }}</div>
            </div>

            <h3 style="text-align:center; color:#a5f3fc; font-size:1.7rem; margin:0 0 32px;">
                {{ recommended_job }}
            </h3>

            <h4>Extracted Information</h4>
            <div class="info-grid">
                <div class="info-item"><span class="info-label">Name</span><div class="info-value">{{ name or '—' }}</div></div>
                <div class="info-item"><span class="info-label">Phone</span><div class="info-value">{{ phone or '—' }}</div></div>
                <div class="info-item" style="grid-column:1/-1;"><span class="info-label">Email</span><div class="info-value">{{ email or '—' }}</div></div>
            </div>

            <h4>Extracted Skills</h4>
            <div class="skills-list">
                {% if extracted_skills %}
                    {% for skill in extracted_skills %}<span class="skill-tag">{{ skill }}</span>{% endfor %}
                {% else %}
                    <p style="color:#94a3b8; font-style:italic;">No skills extracted.</p>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
</div>

<script>
// ── Elements ─────────────────────────────────────────
const dropZone     = document.getElementById('dropZone');
const fileInput    = document.getElementById('resume');
const uploadMsg    = document.getElementById('uploadMessage');
const submitBtn    = document.getElementById('submitBtn');
const loading      = document.getElementById('loadingOverlay');
const form         = document.getElementById('uploadForm');

// ── File selection handlers ──────────────────────────
function showFileName(name) {
    uploadMsg.textContent = `Selected: ${name}`;
    uploadMsg.style.color = '#67e8f9';
    dropZone.classList.add('active');
}

dropZone.addEventListener('click', (e) => {
    // Prevent any double trigger from bubbling
    e.stopPropagation();
    fileInput.click();
});

fileInput.addEventListener('change', () => {
    if (fileInput.files && fileInput.files.length > 0) {
        showFileName(fileInput.files[0].name);
    }
});

// ── Drag & drop ──────────────────────────────────────
['dragenter', 'dragover'].forEach(eventName => {
    dropZone.addEventListener(eventName, e => {
        e.preventDefault();
        dropZone.classList.add('dragover');
    });
});

['dragleave', 'drop'].forEach(eventName => {
    dropZone.addEventListener(eventName, e => {
        e.preventDefault();
        dropZone.classList.remove('dragover');
    });
});

dropZone.addEventListener('drop', e => {
    if (e.dataTransfer?.files?.length) {
        fileInput.files = e.dataTransfer.files;
        showFileName(e.dataTransfer.files[0].name);
    }
});

// ── Submit + loading ─────────────────────────────────
form.addEventListener('submit', () => {
    setTimeout(() => {
        loading.style.display = 'flex';
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right:12px;"></i> Analyzing...';
    }, 60);
});
</script>

</body>
</html>